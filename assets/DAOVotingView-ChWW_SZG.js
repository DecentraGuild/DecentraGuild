import{d as G,r as u,s as B,c as d,b as t,e as Q,h as T,G as U,k as y,l as D,n as k,t as o,m as P,q as c,o as r,_ as N}from"./index-D85ppRYQ.js";const Z={class:"dao-voting-view"},z={class:"view-header"},W={class:"filter-tabs"},q=["onClick"],I={class:"filter-count"},L={class:"proposals-list"},j=["onClick"],Y={class:"proposal-info"},H={class:"proposal-title"},J={class:"proposal-meta"},K={class:"proposal-id"},X={class:"proposal-creator"},p={class:"proposal-summary"},tt={class:"vote-summary"},et={class:"vote-bar"},st={class:"vote-stats"},nt={class:"vote-stat for"},ot={class:"vote-stat against"},it={class:"expand-icon"},at={key:0,class:"proposal-details"},lt={class:"proposal-description"},dt={class:"voting-timeline"},rt={class:"timeline-item"},ct={class:"timeline-value"},ut={class:"timeline-item"},gt={class:"timeline-value"},vt={class:"timeline-item"},kt={class:"timeline-value"},_t={class:"final-decision"},ht={class:"decision-summary"},At={class:"decision-bar"},Vt={class:"decision-track"},ft={class:"decision-stats"},Pt={class:"decision-stat for"},mt={class:"decision-stat against"},Bt={class:"dual-voting-results"},Ft={class:"dao-results-grid"},bt={class:"dao-result-box rep-dao"},wt={class:"dao-result-header"},Tt={class:"dao-result-stats"},yt={class:"stat"},Dt={class:"stat"},$t={class:"stat"},Mt={class:"dao-result-bars"},Ct={class:"result-bar"},St={class:"result-bar-label"},Ot={class:"result-bar-track"},Rt={class:"result-count"},xt={class:"result-bar"},Et={class:"result-bar-label"},Gt={class:"result-bar-track"},Qt={class:"result-count"},Ut={class:"dao-result-box sup-dao"},Nt={class:"dao-result-header"},Zt={class:"dao-result-stats"},zt={class:"stat"},Wt={class:"stat"},qt={class:"stat"},It={class:"dao-result-bars"},Lt={class:"result-bar"},jt={class:"result-bar-label"},Yt={class:"result-bar-track"},Ht={class:"result-count"},Jt={class:"result-bar"},Kt={class:"result-bar-label"},Xt={class:"result-bar-track"},pt={class:"result-count"},te={class:"voting-actions"},ee={class:"voting-power-section"},se={class:"power-box rep-dao"},ne={class:"power-content"},oe={class:"power-value"},ie={key:0,class:"vote-actions"},ae={class:"vote-options"},le=["onClick"],de=["onClick"],re={class:"power-box sup-dao"},ce={class:"power-content"},ue={class:"power-value"},ge={key:0,class:"vote-actions"},ve={class:"vote-options"},ke=["onClick"],_e=["onClick"],he={key:0,class:"voted-status"},Ae=G({__name:"DAOVotingView",setup(Ve){const $=u(150),M=u(500),F=B(()=>$.value),b=B(()=>M.value),C=u([{value:"all",label:"All Proposals",count:3},{value:"active",label:"Active",count:1},{value:"passed",label:"Passed",count:1},{value:"cancelled",label:"Cancelled",count:1}]),_=u("all"),h=u([{id:"1",title:"Should we expand the dGuild platform to include DeFi yield farming?",description:"This proposal seeks approval to integrate DeFi yield farming features into the dGuild platform, allowing guild members to earn additional rewards by staking their REP and SUP tokens in liquidity pools. This would create new revenue streams for the guild treasury.",creator:"GuildMaster",status:"active",startDate:"2024-01-20T10:00:00Z",endDate:"2024-01-27T23:59:59Z",tokenATotal:127,tokenAVotes:89,tokenAVotesFor:67,tokenAVotesAgainst:22,tokenAQuorum:51,tokenAThreshold:50,tokenBTotal:95,tokenBVotes:73,tokenBVotesFor:45,tokenBVotesAgainst:28,tokenBQuorum:51,tokenBThreshold:50,finalVotesFor:0,finalVotesAgainst:0,tokenAForPercentage:0,tokenAAgainstPercentage:0,tokenBForPercentage:0,tokenBAgainstPercentage:0,finalForPercentage:0,finalAgainstPercentage:0,totalForPercentage:0,totalAgainstPercentage:0},{id:"2",title:"Should we create this dGuild platform?",description:"This proposal seeks approval to officially launch the dGuild platform, enabling decentralized guild management with treasury, voting, job boards, and mini-games.",creator:"GuildMaster",status:"passed",startDate:"2024-01-10T10:00:00Z",endDate:"2024-01-17T23:59:59Z",tokenATotal:120,tokenAVotes:98,tokenAVotesFor:78,tokenAVotesAgainst:20,tokenAQuorum:51,tokenAThreshold:50,tokenBTotal:90,tokenBVotes:75,tokenBVotesFor:60,tokenBVotesAgainst:15,tokenBQuorum:51,tokenBThreshold:50,finalVotesFor:0,finalVotesAgainst:0,tokenAForPercentage:0,tokenAAgainstPercentage:0,tokenBForPercentage:0,tokenBAgainstPercentage:0,finalForPercentage:0,finalAgainstPercentage:0,totalForPercentage:0,totalAgainstPercentage:0},{id:"3",title:"Should we increase guild treasury fees?",description:"This proposal seeks to increase the fees collected by the guild treasury from 2% to 3% to fund additional development and community initiatives.",creator:"TreasuryManager",status:"cancelled",startDate:"2024-01-15T10:00:00Z",endDate:"2024-01-22T23:59:59Z",tokenATotal:125,tokenAVotes:45,tokenAVotesFor:20,tokenAVotesAgainst:25,tokenAQuorum:51,tokenAThreshold:50,tokenBTotal:92,tokenBVotes:38,tokenBVotesFor:18,tokenBVotesAgainst:20,tokenBQuorum:51,tokenBThreshold:50,finalVotesFor:0,finalVotesAgainst:0,tokenAForPercentage:0,tokenAAgainstPercentage:0,tokenBForPercentage:0,tokenBAgainstPercentage:0,finalForPercentage:0,finalAgainstPercentage:0,totalForPercentage:0,totalAgainstPercentage:0}]);h.value.forEach(s=>{s.tokenAForPercentage=Math.round(s.tokenAVotesFor/s.tokenAVotes*100),s.tokenAAgainstPercentage=Math.round(s.tokenAVotesAgainst/s.tokenAVotes*100),s.tokenBForPercentage=Math.round(s.tokenBVotesFor/s.tokenBVotes*100),s.tokenBAgainstPercentage=Math.round(s.tokenBVotesAgainst/s.tokenBVotes*100);const n=s.tokenAVotesFor/s.tokenAVotes*.6,e=s.tokenBVotesFor/s.tokenBVotes*.4;s.finalForPercentage=Math.round((n+e)*100),s.finalAgainstPercentage=Math.round(100-s.finalForPercentage),s.totalForPercentage=Math.round((s.tokenAVotesFor+s.tokenBVotesFor)/(s.tokenAVotes+s.tokenBVotes)*100),s.totalAgainstPercentage=Math.round((s.tokenAVotesAgainst+s.tokenBVotesAgainst)/(s.tokenAVotes+s.tokenBVotes)*100)});const S=B(()=>_.value==="all"?h.value:h.value.filter(s=>s.status===_.value)),g=u(null),A=u(new Map),O=s=>{var n;((n=g.value)==null?void 0:n.id)===s.id?g.value=null:g.value=s},V=(s,n,e)=>{const a=`${s}-${n}`;A.value.set(a,e);const i=h.value.find(E=>E.id===s);if(!i)return;const l=n==="A"?F.value:b.value;n==="A"?(e==="for"?i.tokenAVotesFor+=l:i.tokenAVotesAgainst+=l,i.tokenAVotes+=l):(e==="for"?i.tokenBVotesFor+=l:i.tokenBVotesAgainst+=l,i.tokenBVotes+=l),i.tokenAForPercentage=Math.round(i.tokenAVotesFor/i.tokenAVotes*100),i.tokenAAgainstPercentage=Math.round(i.tokenAVotesAgainst/i.tokenAVotes*100),i.tokenBForPercentage=Math.round(i.tokenBVotesFor/i.tokenBVotes*100),i.tokenBAgainstPercentage=Math.round(i.tokenBVotesAgainst/i.tokenBVotes*100);const v=i.tokenAVotesFor/i.tokenAVotes*.6,x=i.tokenBVotesFor/i.tokenBVotes*.4;i.finalForPercentage=Math.round((v+x)*100),i.finalAgainstPercentage=Math.round(100-i.finalForPercentage)},m=s=>A.value.has(`${s}-A`)||A.value.has(`${s}-B`),f=(s,n)=>{const e=`${s}-${n}`,a=A.value.get(e);return a?a==="for"?"Voted For":"Voted Against":"Not Voted"},w=s=>new Date(s).toLocaleDateString(),R=s=>{const n=new Date,a=new Date(s).getTime()-n.getTime();if(a<=0)return"Ended";const i=Math.floor(a/(1e3*60*60*24)),l=Math.floor(a%(1e3*60*60*24)/(1e3*60*60));return i>0?`${i} day${i>1?"s":""}`:`${l} hour${l>1?"s":""}`};return(s,n)=>(r(),d("div",Z,[t("div",z,[t("h1",null,[Q(U,{icon:"game-icons:vote",size:"lg",variant:"primary","icon-shape":"none"}),n[0]||(n[0]=T(" DAO Voting ",-1))]),n[1]||(n[1]=t("p",null,"Vote separately in REP & SUP DAOs - results combine into dGuild decisions",-1))]),t("div",W,[(r(!0),d(y,null,D(C.value,e=>(r(),d("button",{key:e.value,onClick:a=>_.value=e.value,class:k(["filter-tab",{active:_.value===e.value}])},[T(o(e.label)+" ",1),t("span",I,o(e.count),1)],10,q))),128))]),t("div",L,[(r(!0),d(y,null,D(S.value,e=>{var a,i,l;return r(),d("div",{key:e.id,class:k(["proposal-item",{expanded:((a=g.value)==null?void 0:a.id)===e.id}])},[t("div",{class:"proposal-header",onClick:v=>O(e)},[t("div",Y,[t("div",H,o(e.title),1),t("div",J,[t("span",K,"#"+o(e.id),1),t("span",X,"by "+o(e.creator),1),t("span",{class:k(["proposal-status",e.status])},o(e.status.toUpperCase()),3)])]),t("div",p,[t("div",tt,[t("div",et,[t("div",{class:"vote-bar-fill for",style:c({width:`${e.totalForPercentage}%`})},null,4),t("div",{class:"vote-bar-fill against",style:c({width:`${e.totalAgainstPercentage}%`})},null,4)]),t("div",st,[t("span",nt,o(e.totalForPercentage)+"% For",1),t("span",ot,o(e.totalAgainstPercentage)+"% Against",1)])]),t("div",it,o(((i=g.value)==null?void 0:i.id)===e.id?"â–¼":"â–¶"),1)])],8,j),((l=g.value)==null?void 0:l.id)===e.id?(r(),d("div",at,[t("div",lt,[n[2]||(n[2]=t("h3",null,"ðŸ“‹ Description",-1)),t("p",null,o(e.description),1)]),t("div",dt,[t("div",rt,[n[3]||(n[3]=t("span",{class:"timeline-label"},"Start Date:",-1)),t("span",ct,o(w(e.startDate)),1)]),t("div",ut,[n[4]||(n[4]=t("span",{class:"timeline-label"},"End Date:",-1)),t("span",gt,o(w(e.endDate)),1)]),t("div",vt,[n[5]||(n[5]=t("span",{class:"timeline-label"},"Time Remaining:",-1)),t("span",kt,o(R(e.endDate)),1)])]),t("div",_t,[n[7]||(n[7]=t("h4",null,"ðŸ† Final dGuild Decision",-1)),t("div",ht,[t("div",At,[n[6]||(n[6]=t("div",{class:"decision-label"},"Combined Result",-1)),t("div",Vt,[t("div",{class:"decision-fill for",style:c({width:`${e.finalForPercentage}%`})},null,4),t("div",{class:"decision-fill against",style:c({width:`${e.finalAgainstPercentage}%`})},null,4)]),t("div",ft,[t("span",Pt,o(e.finalForPercentage)+"% For",1),t("span",mt,o(e.finalAgainstPercentage)+"% Against",1)])])])]),t("div",Bt,[n[10]||(n[10]=t("h3",null,"ðŸ—³ï¸ Dual DAO Voting Results",-1)),t("div",Ft,[t("div",bt,[t("div",wt,[n[8]||(n[8]=t("h4",null,"ðŸª™ REP DAO (60% weight)",-1)),t("div",Tt,[t("span",yt,"Quorum: "+o(e.tokenAQuorum)+"%",1),t("span",Dt,"Threshold: "+o(e.tokenAThreshold)+"%",1),t("span",$t,"Voters: "+o(e.tokenAVotes)+"/"+o(e.tokenATotal),1)])]),t("div",Mt,[t("div",Ct,[t("div",St,"For ("+o(e.tokenAForPercentage)+"%)",1),t("div",Ot,[t("div",{class:"result-bar-fill for",style:c({width:`${e.tokenAForPercentage}%`})},null,4)]),t("div",Rt,o(e.tokenAVotesFor)+" votes",1)]),t("div",xt,[t("div",Et,"Against ("+o(e.tokenAAgainstPercentage)+"%)",1),t("div",Gt,[t("div",{class:"result-bar-fill against",style:c({width:`${e.tokenAAgainstPercentage}%`})},null,4)]),t("div",Qt,o(e.tokenAVotesAgainst)+" votes",1)])])]),t("div",Ut,[t("div",Nt,[n[9]||(n[9]=t("h4",null,"ðŸŽ¯ SUP DAO (40% weight)",-1)),t("div",Zt,[t("span",zt,"Quorum: "+o(e.tokenBQuorum)+"%",1),t("span",Wt,"Threshold: "+o(e.tokenBThreshold)+"%",1),t("span",qt,"Voters: "+o(e.tokenBVotes)+"/"+o(e.tokenBTotal),1)])]),t("div",It,[t("div",Lt,[t("div",jt,"For ("+o(e.tokenBForPercentage)+"%)",1),t("div",Yt,[t("div",{class:"result-bar-fill for",style:c({width:`${e.tokenBForPercentage}%`})},null,4)]),t("div",Ht,o(e.tokenBVotesFor)+" votes",1)]),t("div",Jt,[t("div",Kt,"Against ("+o(e.tokenBAgainstPercentage)+"%)",1),t("div",Xt,[t("div",{class:"result-bar-fill against",style:c({width:`${e.tokenBAgainstPercentage}%`})},null,4)]),t("div",pt,o(e.tokenBVotesAgainst)+" votes",1)])])])])]),t("div",te,[t("div",ee,[t("div",se,[n[12]||(n[12]=t("h4",null,"ðŸª™ REP DAO Voting Power",-1)),t("div",ne,[t("div",oe,o(F.value)+" REP (REPUTATION)",1),t("div",{class:k(["power-status",f(e.id,"A")])},o(f(e.id,"A")),3),m(e.id)?P("",!0):(r(),d("div",ie,[n[11]||(n[11]=t("h5",null,"Vote in REP DAO",-1)),t("div",ae,[t("button",{onClick:v=>V(e.id,"A","for"),class:"vote-btn for"}," ðŸ‘ Vote For ",8,le),t("button",{onClick:v=>V(e.id,"A","against"),class:"vote-btn against"}," ðŸ‘Ž Vote Against ",8,de)])]))])]),t("div",re,[n[14]||(n[14]=t("h4",null,"ðŸŽ¯ SUP DAO Voting Power",-1)),t("div",ce,[t("div",ue,o(b.value)+" SUP (SUPPORT)",1),t("div",{class:k(["power-status",f(e.id,"B")])},o(f(e.id,"B")),3),m(e.id)?P("",!0):(r(),d("div",ge,[n[13]||(n[13]=t("h5",null,"Vote in SUP DAO",-1)),t("div",ve,[t("button",{onClick:v=>V(e.id,"B","for"),class:"vote-btn for"}," ðŸ‘ Vote For ",8,ke),t("button",{onClick:v=>V(e.id,"B","against"),class:"vote-btn against"}," ðŸ‘Ž Vote Against ",8,_e)])]))])])]),m(e.id)?(r(),d("div",he,[...n[15]||(n[15]=[t("span",{class:"status-icon"},"âœ…",-1),t("span",null,"You have voted in this proposal",-1)])])):P("",!0)])])):P("",!0)],2)}),128))])]))}}),Pe=N(Ae,[["__scopeId","data-v-2ecf80e2"]]);export{Pe as default};
