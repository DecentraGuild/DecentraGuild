<template>
  <div class="blueprint-view">
    <!-- Hero Section -->
    <section class="hero-section fade-section" ref="heroSection">
      <div class="hero-content">
        <div class="hero-badge">
          <Icon icon="mdi:compass" class="badge-icon" />
          <span>The Blueprint</span>
        </div>
        <h1 class="hero-title">Building the Future of Web3 Guilds</h1>
        <p class="hero-subtitle">
          A complete solution for creating self-sovereign digital kingdoms on Solana
        </p>
        <div class="scroll-indicator">
          <Icon icon="mdi:chevron-down" class="scroll-icon" />
        </div>
      </div>
    </section>

    <!-- Section 1: What is dGuild -->
    <section class="content-section fade-section" ref="section1">
      <div class="section-container">
        <div class="section-header">
          <h2 class="section-title">Where Guilds Find Their Home</h2>
        </div>
        
        <div class="section-grid">
          <div class="content-card main-card">
            <h3 class="card-heading">More Than a Group—A Digital Kingdom</h3>
            <div class="card-content">
              <p>
                Forge your own digital kingdom, a space where players, builders, and creators unite under a shared banner.
              </p>
              <p>
                A dGuild isn't just a group—it's a living network of people bound by purpose, play, and shared ownership. 
                Built on Solana and powered by its people, every dGuild is a self-sovereign hub where collaboration happens transparently and decisions belong to the community.
              </p>
              <p>
                It's your crew's home base, your social hub, your coordination layer, and your digital identity, all rolled into one.
                Organize raids, build projects, manage resources, and share in the rewards together. All on-chain, directly under your control.
              </p>
              <p>
                Because the future of gaming isn't about lone heroes—it's about legendary groups.
              </p>
              <div class="tagline">
                <Icon icon="mdi:crown" class="tagline-icon" />
                Your dGuild. Your goals. Your future.
              </div>
            </div>
          </div>
          
          <div class="image-card">
            <img 
              src="/blueprint/Step1.webp" 
              alt="dGuild Overview"
              class="section-image"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2: Built on Shared Power -->
    <section class="content-section fade-section alternate" ref="section2">
      <div class="section-container">
        <div class="section-header">
          <h2 class="section-title">Value through collaboration</h2>
        </div>
        
        <div class="section-grid reverse">
          <div class="image-card">
            <img 
              src="/blueprint/Step2.webp" 
              alt="Shared Power"
              class="section-image"
            />
          </div>
          
          <div class="content-card main-card">
            <h3 class="card-heading">From Foundation to Execution</h3>
            <div class="card-content">
              <p>
                Web3 guilds exist in the space between hobby groups and real organizations. 
                But collaborating on-chain as a group requires deep technical knowledge, legal frameworks, and capital that most individuals don't want to risk.
              </p>
              <p>
                This is where dGuild changes everything. By accepting our blueprint your allowed to function as 1 entity, right from the start.
                 By pooling resources into <strong>dGuild vaults</strong>, members gain access to assets and opportunities they couldn't reach individually.
              </p>
              
              <div class="feature-grid">
                <div class="feature-item">
                  <Icon icon="mdi:safe" class="feature-icon" />
                  <div>
                    <h4>4 Specialized Vaults</h4>
                    <p>Income flows through secure multisig vaults that fund operations, back tokens, and fuel the perpetual engine.</p>
                  </div>
                </div>
                
                <div class="feature-item">
                  <Icon icon="mdi:vote" class="feature-icon" />
                  <div>
                    <h4>Dual Governance</h4>
                    <p>Two token systems and three DAOs balance daily operations with long-term stability.</p>
                  </div>
                </div>
                
                <div class="feature-item">
                  <Icon icon="mdi:shield-lock" class="feature-icon" />
                  <div>
                    <h4>Self-Custody</h4>
                    <p>Your guild owns its assets. No platform can take them away.</p>
                  </div>
                </div>
                
                <div class="feature-item">
                  <Icon icon="mdi:scale-balance" class="feature-icon" />
                  <div>
                    <h4>Legal Recognition</h4>
                    <p>Real-world legal wrappers ensure compliance and legitimacy.</p>
                  </div>
                </div>
                
                <div class="feature-item">
                  <Icon icon="mdi:tools" class="feature-icon" />
                  <div>
                    <h4>Unified Tools</h4>
                    <p>Tokens, quests, NFTs, collaboration—everything you need in one ecosystem.</p>
                  </div>
                </div>
              </div>
              
              <p class="emphasis">
                The dGuild template provides the complete technical and legal backbone for Play-to-Earn, Esports, Web3 gaming, and community ventures to flourish. Lower personal risk while increasing collective power.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 3: Tokenomics -->
    <section class="content-section fade-section" ref="section3">
      <div class="section-container">
        <div class="section-header">
          <h2 class="section-title">Like King & Queen</h2>
        </div>
        
        <div class="section-grid">
          <div class="content-card main-card">
            <h3 class="card-heading">The Best Empires Are Ruled by Two</h3>
            <div class="card-content">
              <p>
                Just as a kingdom thrives under the balanced rule of king and queen, every dGuild is governed by two groups of complementary token holders. 
                Each with their own voice, their own DAO, their own purpose.
              </p>
              
              <div class="token-cards">
                <div class="token-card token1">
                  <div class="token-header">
                    <Icon icon="game-icons:crown-coin" class="token-icon" />
                    <div class="token-title-group">
                      <h4>Token1</h4>
                      <span class="token-label">Contribution</span>
                    </div>
                  </div>
                  <p>Earned through gameplay, quests, participation, and building the guild. This is your voice earned through daily operations.</p>
                </div>
                
                <div class="token-card token2">
                  <div class="token-header">
                    <Icon icon="game-icons:crown-coin" class="token-icon" />
                    <div class="token-title-group">
                      <h4>Token2</h4>
                      <span class="token-label">Stability</span>
                    </div>
                  </div>
                  <p>Minted by providing assets to the organization. This represents your stake in long-term stability and growth of the organisation.</p>
                </div>
              </div>
              
              <p>
                These two groups of token holders vote through their respective DAOs, which combine into a unified guild decision. Together, 
                they elect a <strong>Council</strong> to handle the organization and treasury management. Officers are assigned for day-to-day management and operations.
              </p>
              
              <div class="tagline">
                <Icon icon="mdi:castle" class="tagline-icon" />
                Controlled by tokens, built for it's members.
              </div>
            </div>
          </div>
          
          <div class="image-card">
            <img 
              src="/blueprint/Step3.webp" 
              alt="Governance System"
              class="section-image"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: Your Castle -->
    <section class="content-section fade-section alternate" ref="section4">
      <div class="section-container">
        <div class="section-header">
          <h2 class="section-title">Your Castle, Your Kingdom</h2>
        </div>
        
        <div class="section-grid reverse">
          <div class="image-card">
            <img 
              src="/blueprint/Step4.webp" 
              alt="Your Castle"
              class="section-image"
            />
          </div>
          
          <div class="content-card main-card">
            <h3 class="card-heading">A solid Foundation</h3>
            <div class="card-content">
              <p>
                When you create a dGuild, you gain access to a complete suite of on-chain tools that transform your community into a self-running organization.
              </p>
              
              <h4 class="subheading">Your dGuild Can:</h4>
              <div class="capabilities-grid">
                <div class="capability-item">
                  <Icon icon="mdi:account-badge" />
                  <span>Create profiles, ranks, and assign permissions</span>
                </div>
                <div class="capability-item">
                  <Icon icon="mdi:coin" />
                  <span>Launch tokens, NFTs, and achievements</span>
                </div>
                <div class="capability-item">
                  <Icon icon="mdi:map-marker-path" />
                  <span>Run quests, events, tournaments, and challenges</span>
                </div>
                <div class="capability-item">
                  <Icon icon="mdi:gift" />
                  <span>Distribute airdrops and share resources with members</span>
                </div>
                <div class="capability-item">
                  <Icon icon="mdi:key" />
                  <span>Manage workflows, treasury, and taxes</span>
                </div>
                <div class="capability-item">
                  <Icon icon="mdi:gavel" />
                  <span>Govern through DAO votes and Council operations</span>
                </div>
              </div>
              
              <p class="emphasis">
                Everything your guild needs — from formation to expansion — inside one digital castle.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="cta-section fade-section" ref="ctaSection">
      <div class="cta-content">
        <h2 class="cta-title">Ready to Build Your Guild?</h2>
        <p class="cta-subtitle">Join the future of Web3 gaming and community governance</p>
        <div class="cta-buttons">
          <router-link to="/demo" class="cta-button primary">
            <Icon icon="mdi:play-circle" />
            <span>Try the Demo</span>
          </router-link>
          <router-link to="/build-your-own" class="cta-button secondary">
            <Icon icon="mdi:toolbox" />
            <span>Build Your Own</span>
          </router-link>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'
import { Icon } from '@iconify/vue'

// Refs for sections
const heroSection = ref<HTMLElement>()
const section1 = ref<HTMLElement>()
const section2 = ref<HTMLElement>()
const section3 = ref<HTMLElement>()
const section4 = ref<HTMLElement>()
const ctaSection = ref<HTMLElement>()

// Intersection Observer for fade animations
const observerOptions = {
  threshold: 0.15,
  rootMargin: '0px 0px -100px 0px'
}

let observer: IntersectionObserver | null = null

const handleIntersection = (entries: IntersectionObserverEntry[]) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible')
    } else {
      // Optional: remove 'visible' class when scrolling back up for re-animation
      // entry.target.classList.remove('visible')
    }
  })
}

onMounted(() => {
  observer = new IntersectionObserver(handleIntersection, observerOptions)
  
  // Observe all sections
  const sections = [
    heroSection.value,
    section1.value,
    section2.value,
    section3.value,
    section4.value,
    ctaSection.value
  ]
  
  sections.forEach(section => {
    if (section) {
      observer?.observe(section)
    }
  })
})

onUnmounted(() => {
  if (observer) {
    observer.disconnect()
  }
})
</script>

<style scoped>
.blueprint-view {
  min-height: 100vh;
  background: var(--primary-bg);
  overflow-x: hidden;
}

/* Fade animations */
.fade-section {
  opacity: 0;
  transform: translateY(50px);
  transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

.fade-section.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Hero Section */
.hero-section {
  min-height: 20vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px 10px;
  position: relative;
  background: linear-gradient(180deg, var(--primary-bg) 0%, rgba(10, 10, 15, 0.95) 100%);
}

.hero-content {
  max-width: 1000px;
  text-align: center;
}

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 24px;
  background: rgba(147, 51, 234, 0.1);
  border: 2px solid var(--primary-color);
  border-radius: 50px;
  color: var(--primary-color);
  font-weight: 600;
  font-size: 1rem;
  margin-bottom: 32px;
}

.badge-icon {
  font-size: 1.5rem;
}

.hero-title {
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 900;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin: 0 0 24px 0;
  line-height: 1.1;
}

.hero-subtitle {
  font-size: clamp(1.2rem, 3vw, 1.8rem);
  color: var(--text-secondary);
  margin: 0 0 48px 0;
  line-height: 1.5;
}

.scroll-indicator {
  margin-top: 80px;
  animation: bounce 2s infinite;
}

.scroll-icon {
  font-size: 3rem;
  color: var(--primary-color);
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-20px);
  }
  60% {
    transform: translateY(-10px);
  }
}

/* Content Sections */
.content-section {
  min-height: 100vh;
  display: flex;
  align-items: center;
  padding: 60px 40px;
}

.content-section.alternate {
  background: rgba(20, 20, 30, 0.3);
}

.section-container {
  max-width: 1400px;
  margin: 0 auto;
  width: 100%;
}

.section-header {
  display: flex;
  align-items: center;
  gap: 24px;
  margin-bottom: 60px;
}

.section-number {
  font-size: 5rem;
  font-weight: 900;
  color: rgba(147, 51, 234, 0.2);
  line-height: 1;
}

.section-title {
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 800;
  color: var(--text-primary);
  margin: 0;
}

.section-grid {
  display: grid;
  grid-template-columns: 1.2fr 0.8fr;
  gap: 60px;
  align-items: center;
}

.section-grid.reverse {
  grid-template-columns: 0.8fr 1.2fr;
}

/* Cards */
.content-card {
  background: var(--card-bg);
  border: 2px solid var(--border-color);
  border-radius: var(--border-radius-lg);
  padding: 48px;
  box-shadow: var(--shadow-card);
}

.card-heading {
  font-size: clamp(1.8rem, 3vw, 2.5rem);
  font-weight: 800;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin: 0 0 24px 0;
}

.card-content p {
  font-size: clamp(1rem, 2vw, 1.2rem);
  color: var(--text-secondary);
  line-height: 1.7;
  margin: 0 0 20px 0;
}

.card-content strong {
  color: var(--text-primary);
  font-weight: 600;
}

.image-card {
  position: relative;
  border-radius: var(--border-radius-lg);
  overflow: hidden;
}

.section-image {
  width: 100%;
  height: auto;
  display: block;
  border-radius: var(--border-radius-lg);
  box-shadow: 0 20px 60px rgba(147, 51, 234, 0.3);
}

/* Tagline */
.tagline {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: clamp(1.1rem, 2vw, 1.4rem);
  font-weight: 700;
  font-style: italic;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-top: 32px;
}

.tagline-icon {
  font-size: 1.8rem;
  color: var(--primary-color);
}

/* Feature Grid */
.feature-grid {
  display: grid;
  gap: 12px;
  margin: 20px 0;
}

.feature-item {
  display: flex;
  gap: 10px;
  padding: 12px 16px;
  background: rgba(147, 51, 234, 0.05);
  border: 1px solid rgba(147, 51, 234, 0.2);
  border-radius: var(--border-radius-sm);
}

.feature-icon {
  font-size: 1.3rem;
  color: var(--primary-color);
  flex-shrink: 0;
  margin-top: 2px;
}

.feature-item h4 {
  font-size: 0.95rem;
  color: var(--text-primary);
  margin: 0 0 4px 0;
  font-weight: 600;
}

.feature-item p {
  font-size: 0.85rem;
  color: var(--text-secondary);
  margin: 0;
  line-height: 1.4;
}

.emphasis {
  font-weight: 600;
  color: var(--text-primary) !important;
  border-left: 4px solid var(--primary-color);
  padding-left: 20px;
  margin-top: 32px !important;
}

/* Token Cards */
.token-cards {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin: 32px 0;
}

.token-card {
  padding: 32px;
  border-radius: var(--border-radius-md);
  border: 2px solid;
  transition: all 0.3s ease;
}

.token-card.token1 {
  background: rgba(239, 68, 68, 0.05);
  border-color: rgba(239, 68, 68, 0.3);
}

.token-card.token1:hover {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgb(239, 68, 68);
  transform: translateY(-4px);
}

.token-card.token2 {
  background: rgba(59, 130, 246, 0.05);
  border-color: rgba(59, 130, 246, 0.3);
}

.token-card.token2:hover {
  background: rgba(59, 130, 246, 0.1);
  border-color: rgb(59, 130, 246);
  transform: translateY(-4px);
}

.token-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.token-icon {
  font-size: 2.5rem;
}

.token-card.token1 .token-icon {
  color: rgb(239, 68, 68);
}

.token-card.token2 .token-icon {
  color: rgb(59, 130, 246);
}

.token-title-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.token-header h4 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
}

.token-label {
  font-size: 0.9rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0.7;
}

.token-card p {
  font-size: 1rem;
  color: var(--text-secondary);
  line-height: 1.6;
  margin: 0;
}

/* Capabilities Grid */
.subheading {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--primary-color);
  margin: 32px 0 20px 0;
}

.capabilities-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  margin: 24px 0 32px 0;
}

.capability-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: rgba(147, 51, 234, 0.05);
  border-radius: var(--border-radius-sm);
  font-size: 1rem;
  color: var(--text-secondary);
  transition: all 0.3s ease;
}

.capability-item:hover {
  background: rgba(147, 51, 234, 0.1);
  transform: translateX(4px);
}

.capability-item :deep(svg) {
  font-size: 1.5rem;
  color: var(--primary-color);
  flex-shrink: 0;
}

/* CTA Section */
.cta-section {
  min-height: 80vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 120px 40px;
  background: linear-gradient(180deg, rgba(10, 10, 15, 0.95) 0%, var(--primary-bg) 100%);
}

.cta-content {
  max-width: 800px;
  text-align: center;
}

.cta-title {
  font-size: clamp(2.5rem, 6vw, 4.5rem);
  font-weight: 900;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin: 0 0 24px 0;
}

.cta-subtitle {
  font-size: clamp(1.1rem, 2.5vw, 1.5rem);
  color: var(--text-secondary);
  margin: 0 0 48px 0;
}

.cta-buttons {
  display: flex;
  gap: 24px;
  justify-content: center;
  flex-wrap: wrap;
}

.cta-button {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  padding: 18px 36px;
  border-radius: 50px;
  font-size: 1.1rem;
  font-weight: 600;
  text-decoration: none;
  transition: all 0.3s ease;
  border: 2px solid;
}

.cta-button.primary {
  background: var(--primary-color);
  border-color: var(--primary-color);
  color: white;
}

.cta-button.primary:hover {
  background: transparent;
  color: var(--primary-color);
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(147, 51, 234, 0.3);
}

.cta-button.secondary {
  background: transparent;
  border-color: var(--border-color);
  color: var(--text-primary);
}

.cta-button.secondary:hover {
  border-color: var(--primary-color);
  color: var(--primary-color);
  transform: translateY(-4px);
}

.cta-button :deep(svg) {
  font-size: 1.5rem;
}

/* Responsive Design */
@media (max-width: 1024px) {
  .section-grid,
  .section-grid.reverse {
    grid-template-columns: 1fr;
    gap: 40px;
  }
  
  .token-cards {
    grid-template-columns: 1fr;
  }
  
  .capabilities-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .hero-section,
  .content-section,
  .cta-section {
    padding: 80px 20px;
  }
  
  .section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 40px;
  }
  
  .section-number {
    font-size: 3rem;
  }
  
  .content-card {
    padding: 32px 24px;
  }
  
  .hero-badge {
    font-size: 0.9rem;
    padding: 10px 20px;
  }
  
  .cta-buttons {
    flex-direction: column;
    align-items: stretch;
  }
  
  .cta-button {
    justify-content: center;
  }
}
</style>
